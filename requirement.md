## 2. 车票查询与筛选

### 2.1 页面结构概述

2.1.1 “车票查询与筛选”模块为单页结构，包含以下三个主要区域：

* **顶部区域：基础搜索栏**

  * 包含输入项：出发地、目的地、出发日期
  * 包含“交换出发地与目的地”按钮
  * 包含“查询车票”按钮
* **中部区域：筛选栏**

  * 包含列车类型筛选（G / C / D / Z / T / K）
  * 包含座位类型筛选（商务座 / 一等座 / 二等座 / 软卧 / 硬卧 / 硬座）
* **底部区域：车次结果展示区**

  * 查询后显示符合条件的所有车次信息（包括有票与无票）
  * 无票车次“预订”按钮为灰色不可点击

---

### 2.2 基础搜索栏交互逻辑

#### 2.2.1 出发地与目的地输入

* 出发地与目的地为下拉选择框，数据来源为系统预置的可运营车站列表。
* 出发地与目的地不可相同。

#### 2.2.2 出发日期选择

* 出发日期为可选日历输入框。
* 日期选择范围为**当前日期起 14 天内**。

#### 2.2.3 一键交换出发地与目的地

**Scenario: 交换出发地与目的地**

* **Given** 用户已在搜索栏中选择了出发地和目的地
* **When** 用户点击“交换”按钮
* **Then** 系统立即交换两者的值
* **And** 页面保留当前日期选择不变

#### 2.2.4 发起查询请求

**Scenario: 成功查询车票**

* **Given** 用户在搜索栏选择有效的出发地、目的地和出发日期
* **When** 用户点击“查询车票”按钮
* **Then** 系统查询数据库中所有满足条件的列车班次
* **And** 页面刷新展示所有车次（包含有票与无票）
* **And** 每条车次信息显示如下字段：

  * 车次号（如 G80）
  * 出发站 / 到达站
  * 出发时间 / 到达时间
  * 历时
  * 各座席类型（商务、一等、二等、软卧、硬卧、硬座）的余票数量与票价
* **And** 若该车次所有席位余票为 0，则显示“无可预订席位”，其“预订”按钮为灰色且不可点击

---

### 2.3 筛选栏交互逻辑

#### 2.3.1 列车类型筛选

**Scenario: 按列车类型筛选**

* **Given** 用户在**车票查询与筛选页面**
* **When** 勾选“G高铁”、“D动车”、“Z直达”、“T特快”、“K快速”等列车类型
* **Then** 页面仅展示属于所选类型的列车班次
* **And** 若无符合条件的班次，提示“无符合条件的列车班次”

#### 2.3.2 座位类型筛选

**Scenario: 按座位类型筛选**

* **Given** 用户在**车票查询与筛选页面**
* **When** 勾选“二等座”或“软卧”等席位类型
* **Then** 页面仅展示包含该席位类型的列车班次
* **And** 若该席位余票为 0，仍显示班次信息，但余票数量为 0

#### 2.3.3 组合筛选

**Scenario: 同时按列车类型与座位类型筛选**

* **Given** 用户在**车票查询与筛选页面**
* **When** 用户勾选列车类型为“G高铁”且座位类型为“一等座”
* **Then** 页面仅展示满足两种条件的班次
* **And** 若无结果，显示提示“暂无符合条件的列车班次”

---

### 2.4 车次展示区交互逻辑

#### 2.4.1 展开班次详情

**Scenario: 查看班次详情**

* **Given** 用户在**车票查询与筛选页面**
* **When** 点击某一班次的“详情”按钮
* **Then** 页面展开显示该列车的经停站、到达时间与历时信息

#### 2.4.2 点击“预订”按钮

**Scenario: 用户已登录并进入预订流程**

* **Given** 用户在**车票查询与筛选页面**
* **And** 用户已登录
* **When** 点击某一班次的“预订”按钮
* **Then** 系统跳转至对应车次区间的“车票预订页面”
* **And** 传递该车次与区间信息（例如 “G80 广州南 → 北京西”）
* **And** 新页面由“车票预订模块”实现，不属于本模块范围

**Scenario: 用户未登录点击预订**

* **Given** 用户在**车票查询与筛选页面**
* **And** 用户未登录
* **When** 点击某一班次的“预订”按钮
* **Then** 系统跳转至“登录页面”

#### 2.4.3 重新查询

**Scenario: 修改查询条件后重新查询**

* **Given** 用户在**车票查询与筛选页面**
* **When** 用户修改出发地、目的地或出发日期
* **Then** 点击“查询车票”后，系统重新查询并刷新结果

